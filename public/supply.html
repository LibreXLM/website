<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Supply â€“ LibreTradingEcosystem</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      background: #101018;
      color: #e8f3ff;
      font-family: 'VT323', monospace;
      font-size: 20px;
      line-height: 1.5;
    }
    .container {
      max-width: 980px;
      margin: 0 auto;
      padding: 16px;
      border: 3px double #5ff6ff;
      box-shadow: 0 0 0 6px #231942, 0 0 20px 6px rgba(111,0,255,.25) inset;
      background: linear-gradient(180deg, rgba(7,7,12,.95), rgba(12,12,20,.95));
    }
    header { text-align: center; margin-bottom: 20px; }
    .badge {
      display: inline-block; margin: 0 4px; padding: 2px 8px;
      border: 2px solid #ff9dfb; color: #ff9dfb;
      font-family: 'Press Start 2P'; font-size: 10px;
      text-transform: uppercase; background: rgba(255,0,230,.08);
    }
    h1 {
      font-family: 'Press Start 2P'; font-size: 20px; color: #fff7a3;
      text-shadow: 0 0 6px #f0ff93, 0 0 16px #70fff9; margin: 10px 0;
    }
    section { border: 2px solid #3df0ff; padding: 12px; margin: 16px 0; background: rgba(10,20,30,.65); }
    section h2 { margin: 0 0 10px; font-family: 'Press Start 2P'; font-size: 14px; color: #b2ffcb; }
    table { width: 100%; border-collapse: collapse; font-size: 18px; }
    th, td { padding: 8px; border-bottom: 1px dashed #5ff6ff; }
    th { text-align: left; color: #ffd9b2; font-family: 'Press Start 2P'; font-size: 11px; }
    tfoot td { font-weight: bold; color: #fff7a3; }
    a { color: #ffb2f5; text-decoration: none; }
    a:hover { text-decoration: underline; color: #b2ffcb; }
    .note {
      margin-top: 20px;
      padding: 14px;
      border: 2px dashed #ff9dfb;
      background: rgba(255,0,230,.08);
      color: #ffb2f5;
      font-size: 18px;
    }
    footer { margin-top: 28px; text-align: center; color: #9cb3c6; font-size: 16px; }
    footer small { display: block; margin-top: 6px; color: #6f87a0; }

    /* ðŸ”¥ Burning effect styling */
    .burning {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      animation: pulseGlow 2s infinite;
      background: linear-gradient(90deg, rgba(255,80,0,0.1), rgba(255,0,100,0.15), rgba(255,80,0,0.1));
      background-size: 400% 400%;
      animation: heatflow 8s ease-in-out infinite;
    }
    .flame {
      font-size: 28px;
      animation: flicker 1s infinite alternate;
      text-shadow: 0 0 8px #ff6600, 0 0 16px #ff3300, 0 0 24px #ff0000;
    }
    .note-text {
      text-align: center;
      color: #ffb2f5;
      max-width: 700px;
    }
    @keyframes flicker {
      0% { opacity: 0.9; transform: scale(1); }
      50% { opacity: 0.7; transform: scale(1.1); }
      100% { opacity: 1; transform: scale(0.95); }
    }
    @keyframes pulseGlow {
      0%, 100% { box-shadow: 0 0 12px #ff0066; }
      50% { box-shadow: 0 0 20px #ff3300; }
    }
    @keyframes heatflow {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .supply-summary {
      margin-top: 16px;
      padding: 10px 12px;
      border: 2px solid #ffb2f5;
      background: rgba(20,10,30,.55);
      font-size: 18px;
    }
    .supply-summary b {
      color: #fff7a3;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="badge">LibreTradingEcosystem</div>
      <div class="badge">Supply Overview</div>
      <h1>LIBRE Supply</h1>
    </header>

    <section>
      <p>
        Inspired by Bitcoinâ€™s limited supply concept, LIBRE began with an <b>initial supply of 21,000,000 tokens</b>.  
        Over time, through multiple <b>burn events</b> and rewards distributed to <b>locked liquidity wallets</b>, the total amount in circulation has decreased.  
        The table below and the numbers in the summary are pulled directly from live on-chain data.
      </p>

      <p>
        In addition, several wallets contain LIBRE that are effectively <b>unspendable or permanently locked</b>.  
        These tokens should not be considered part of the circulating supply.
      </p>

      <h2>Burned & Locked LIBRE Tokens (live on-chain data)</h2>
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Name</th>
            <th>Wallet Address</th>
            <th>Tokens Burned / Locked</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>LIBRE Test Burn Wallet</td>
            <td>
              <a href="https://stellar.expert/explorer/public/account/GBFLW247CP6E77OMYN6UO4VYCUPQPDS2BD4B3NMM2FY7GD3BC35R6AMA" target="_blank">
                GBFLW247CP6E77OMYN6UO4VYCUPQPDS2BD4B3NMM2FY7GD3BC35R6AMA
              </a>
            </td>
            <td>
              <span class="wallet-balance"
                    data-account="GBFLW247CP6E77OMYN6UO4VYCUPQPDS2BD4B3NMM2FY7GD3BC35R6AMA">
                loadingâ€¦
              </span> LIBRE
            </td>
          </tr>
          <tr>
            <td>2</td>
            <td>LIBRE BURN EVENT I</td>
            <td>
              <a href="https://stellar.expert/explorer/public/account/GBYE7X2QRU4ZGSMUBGJ2I4CRDS3IMJJ4JXK4GTSO4N5ZNJAMGS24TWL3" target="_blank">
                GBYE7X2QRU4ZGSMUBGJ2I4CRDS3IMJJ4JXK4GTSO4N5ZNJAMGS24TWL3
              </a>
            </td>
            <td>
              <span class="wallet-balance"
                    data-account="GBYE7X2QRU4ZGSMUBGJ2I4CRDS3IMJJ4JXK4GTSO4N5ZNJAMGS24TWL3">
                loadingâ€¦
              </span> LIBRE
            </td>
          </tr>
          <tr>
            <td>3</td>
            <td>LIBRE BURN EVENT II</td>
            <td>
              <a href="https://stellar.expert/explorer/public/account/GCB2AGWYRRLMSOQGYQ4MVGDYVIFLPWCJY6HFKNJABMXPNSBH52GVHN6Z" target="_blank">
                GCB2AGWYRRLMSOQGYQ4MVGDYVIFLPWCJY6HFKNJABMXPNSBH52GVHN6Z
              </a>
            </td>
            <td>
              <span class="wallet-balance"
                    data-account="GCB2AGWYRRLMSOQGYQ4MVGDYVIFLPWCJY6HFKNJABMXPNSBH52GVHN6Z">
                loadingâ€¦
              </span> LIBRE
            </td>
          </tr>
          <tr>
            <td>4</td>
            <td>LIBRE Ã— DicInu Burn</td>
            <td>
              <a href="https://stellar.expert/explorer/public/account/GBLPG7DBN6DQN57CSFIJEM3JKBI62F57YDHQPKK5QOSVHRL2MN4SRHHZ" target="_blank">
                GBLPG7DBN6DQN57CSFIJEM3JKBI62F57YDHQPKK5QOSVHRL2MN4SRHHZ
              </a>
            </td>
            <td>
              <span class="wallet-balance"
                    data-account="GBLPG7DBN6DQN57CSFIJEM3JKBI62F57YDHQPKK5QOSVHRL2MN4SRHHZ">
                loadingâ€¦
              </span> LIBRE
            </td>
          </tr>
          <tr>
            <td>5</td>
            <td>Locked Issuer Wallet I</td>
            <td>
              <a href="https://stellar.expert/explorer/public/account/GAGG42ACMQ3454R7GB6JUAKU6OPT4EXPW4QWYKEKBVYDQJC3ELGW74AX" target="_blank">
                GAGG42ACMQ3454R7GB6JUAKU6OPT4EXPW4QWYKEKBVYDQJC3ELGW74AX
              </a>
            </td>
            <td>
              <span class="wallet-balance"
                    data-account="GAGG42ACMQ3454R7GB6JUAKU6OPT4EXPW4QWYKEKBVYDQJC3ELGW74AX">
                loadingâ€¦
              </span> LIBRE
            </td>
          </tr>
          <tr>
            <td>6</td>
            <td>Locked Issuer Wallet II</td>
            <td>
              <a href="https://stellar.expert/explorer/public/account/GB7LCUIDT3C2DUOX4O2FSCCBH5NXIUJZ64YQ2N75N5POZRI4DA4AMGEE" target="_blank">
                GB7LCUIDT3C2DUOX4O2FSCCBH5NXIUJZ64YQ2N75N5POZRI4DA4AMGEE
              </a>
            </td>
            <td>
              <span class="wallet-balance"
                    data-account="GB7LCUIDT3C2DUOX4O2FSCCBH5NXIUJZ64YQ2N75N5POZRI4DA4AMGEE">
                loadingâ€¦
              </span> LIBRE
            </td>
          </tr>
              <tr>
    <td>7</td>
    <td>BASH LP Wallet</td>
    <td>
      <a href="https://stellar.expert/explorer/public/account/GD2QISFGY7TEHQ7QBAYWGON35FCDAWFONMYC4JRU4P77NQ6QDZ56JY75" target="_blank">
        GD2QISFGY7TEHQ7QBAYWGON35FCDAWFONMYC4JRU4P77NQ6QDZ56JY75
      </a>
    </td>
    <td>
      <span class="wallet-balance"
            data-account="GD2QISFGY7TEHQ7QBAYWGON35FCDAWFONMYC4JRU4P77NQ6QDZ56JY75">
        loadingâ€¦
      </span> LIBRE
    </td>
  </tr>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="3"><b>Total Tokens Locked / Burned</b></td>
            <td>
              <b><span id="total-locked">loadingâ€¦</span> LIBRE</b>
            </td>
          </tr>
        </tfoot>
      </table>

      <div class="supply-summary">
        <div>
          <b>Total issued LIBRE (StellarExpert):</b>
          <span id="total-supply">loadingâ€¦</span> LIBRE
        </div>
        <div>
          <b>Estimated circulating supply (minus locked/burned):</b>
          <span id="circulating-supply">loadingâ€¦</span> LIBRE
        </div>
      </div>

      <!-- ðŸ”¥ Animated note with flames -->
      <div class="note burning">
        <span class="flame">ðŸ”¥</span>
        <span class="note-text">
          Adjusting for the burn and locked wallets above, the circulating LIBRE supply is calculated in real time from on-chain data.
        </span>
        <span class="flame">ðŸ”¥</span>
      </div>
    </section>

    <footer>
      <small>
        Live data from Stellar network â€¢ Total supply via StellarExpert API â€¢ Numbers may slightly vary with on-chain updates
      </small>
    </footer>
  </div>

  <script>
    // --- Config ---
    const LIBRE_CODE   = "LIBRE";
    const LIBRE_ISSUER = "GAYCCWKECNGDRHYU3UTREBD2XLC3CUQN6FV22TKM4WCQER3IWR7TF5CY";

    // StellarExpert supply endpoint (text/plain)
    const STELLAR_EXPERT_SUPPLY_URL =
      `https://api.stellar.expert/explorer/public/asset/${LIBRE_CODE}-${LIBRE_ISSUER}/supply`;

    // Helper: format number with up to 7 decimals, thousands separators
    function formatLibre(amount) {
      if (!isFinite(amount)) return "0";
      return amount.toLocaleString("en-US", {
        minimumFractionDigits: 0,
        maximumFractionDigits: 7
      });
    }

    async function fetchJson(url) {
      const res = await fetch(url);
      if (!res.ok) {
        throw new Error(`HTTP ${res.status} for ${url}`);
      }
      return res.json();
    }

    async function fetchText(url) {
      const res = await fetch(url);
      if (!res.ok) {
        throw new Error(`HTTP ${res.status} for ${url}`);
      }
      return res.text();
    }

    // Get LIBRE balance for a given account via Horizon
    async function getLibreBalanceForAccount(account) {
      const url = `https://horizon.stellar.org/accounts/${account}`;
      const data = await fetchJson(url);

      const balances = data.balances || [];
      const libreBalance = balances.find(
        (b) =>
          b.asset_code === LIBRE_CODE &&
          b.asset_issuer === LIBRE_ISSUER
      );

      if (!libreBalance) return 0;
      return parseFloat(libreBalance.balance || "0");
    }

    // Get total issued supply from StellarExpert (text/plain)
    async function getLibreTotalSupply() {
      const text = await fetchText(STELLAR_EXPERT_SUPPLY_URL);
      // StellarExpert returns a plain number string like "1203229.6298700"
      return parseFloat(text.trim());
    }

    async function updateSupplyView() {
      const balanceSpans = Array.from(
        document.querySelectorAll(".wallet-balance[data-account]")
      );

      let totalLocked = 0;

      // 1) Load each wallet balance and update table
      for (const span of balanceSpans) {
        const account = span.dataset.account;
        try {
          const bal = await getLibreBalanceForAccount(account);
          totalLocked += bal;
          span.textContent = formatLibre(bal);
        } catch (err) {
          console.error("Failed to load balance for", account, err);
          span.textContent = "error";
        }
      }

      // Update total locked / burned
      const totalLockedEl = document.getElementById("total-locked");
      if (totalLockedEl) {
        totalLockedEl.textContent = formatLibre(totalLocked);
      }

      // 2) Load total supply from StellarExpert
      let totalSupply = 0;
      try {
        totalSupply = await getLibreTotalSupply();
      } catch (err) {
        console.error("Failed to fetch total supply from StellarExpert", err);
      }

      const totalSupplyEl = document.getElementById("total-supply");
      if (totalSupplyEl) {
        totalSupplyEl.textContent = formatLibre(totalSupply);
      }

      // 3) Circulating supply = total supply - locked/burned
      const circulating = totalSupply - totalLocked;
      const circulatingEl = document.getElementById("circulating-supply");
      if (circulatingEl) {
        circulatingEl.textContent = formatLibre(circulating);
      }

      // 4) Update burning note text with live circulating number
      const note = document.querySelector(".note-text");
      if (note && isFinite(circulating)) {
        note.innerHTML =
          `Adjusting for these wallets, the estimated circulating supply is currently about ` +
          `<b>${formatLibre(circulating)} LIBRE</b> (live on-chain data).`;
      }
    }

    // Kick it off after page load
    document.addEventListener("DOMContentLoaded", () => {
      updateSupplyView().catch((err) =>
        console.error("Failed to update supply view", err)
      );
    });
  </script>
</body>
</html>
